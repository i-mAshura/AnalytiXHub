{% extends "base.html" %}

{% block content %}
<div class="row g-4 mb-4">
    <!-- Active Cases Card -->
    <div class="col-md-6 col-lg-3">
        <div class="card cyber-card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="card-title text-light"><i class="bi bi-folder2-open me-2 text-primary"></i> Active Cases
                    </h5>
                    <span class="badge bg-primary rounded-pill">{{ active_cases_count|default(0) }}</span>
                </div>
                <div class="display-4 fw-bold text-white mb-2">{{ active_cases_count|default(0) }}</div>
                <div class="text-muted small">Open investigations</div>
                <a href="/cases" class="btn btn-sm btn-outline-primary mt-3 w-100 stretched-link">View All Cases</a>
            </div>
        </div>
    </div>

    <!-- Threat Alerts Card -->
    <div class="col-md-6 col-lg-3">
        <div class="card cyber-card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="card-title text-light"><i class="bi bi-shield-exclamation me-2 text-danger"></i> High
                        Alerts</h5>
                    <span class="badge bg-danger rounded-pill">{{ high_alerts_count|default(0) }}</span>
                </div>
                <div class="display-4 fw-bold text-white mb-2">{{ high_alerts_count|default(0) }}</div>
                <div class="text-muted small">Requires immediate attention</div>
                <a href="/threat-intel" class="btn btn-sm btn-outline-danger mt-3 w-100 stretched-link">View Alerts</a>
            </div>
        </div>
    </div>

    <!-- System Status Card -->
    <div class="col-md-6 col-lg-3">
        <div class="card cyber-card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="card-title text-light"><i class="bi bi-cpu me-2 text-success"></i> System Load</h5>
                    <span class="badge bg-success rounded-pill">OK</span>
                </div>
                <div class="display-4 fw-bold text-white mb-2">12%</div>
                <div class="text-muted small">API Rate Limits: Normal</div>
                <div class="progress mt-3" style="height: 4px;">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 12%"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Action Card -->
    <div class="col-md-6 col-lg-3">
        <div class="card cyber-card h-100 bg-primary bg-opacity-10 border-primary">
            <div class="card-body text-center d-flex flex-column justify-content-center">
                <h5 class="text-light mb-3">Quick Actions</h5>
                <div class="d-grid gap-2">
                    <a href="/cases/create" class="btn btn-primary"><i class="bi bi-plus-lg me-2"></i> New Case</a>
                    <a href="/investigation" class="btn btn-outline-light"><i class="bi bi-search me-2"></i> Quick
                        Lookup</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-8">
        <div class="card cyber-card mb-4">
            <div
                class="card-header bg-transparent border-bottom border-secondary d-flex justify-content-between align-items-center">
                <h5 class="card-title text-light mb-0"><i class="bi bi-activity me-2"></i> Recent Activity</h5>
                <button class="btn btn-sm btn-outline-secondary"><i class="bi bi-arrow-clockwise"></i> Refresh</button>
            </div>
            <div class="card-body p-0">
                <div class="list-group list-group-flush">
                    {% if recent_activity %}
                    {% for activity in recent_activity %}
                    <div class="list-group-item bg-transparent border-secondary text-light">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1 text-primary">{{ activity.title }}</h6>
                            <small class="text-muted">{{ activity.timestamp }}</small>
                        </div>
                        <p class="mb-1 small">{{ activity.description }}</p>
                        <small class="text-muted"><i class="bi bi-person me-1"></i> {{ activity.user }}</small>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="p-4 text-center text-muted">
                        <i class="bi bi-inbox fs-2 d-block mb-2"></i>
                        No recent activity found. Start an investigation to populate this feed.
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card cyber-card mb-4">
            <div class="card-header bg-transparent border-bottom border-secondary">
                <h5 class="card-title text-light mb-0"><i class="bi bi-link-45deg me-2"></i> Connected APIs</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li
                        class="list-group-item bg-transparent border-secondary d-flex justify-content-between align-items-center">
                        <div><i class="bi bi-circle-fill text-success small me-2"></i> Etherscan V2</div>
                        <span class="badge bg-success bg-opacity-25 text-success">Connected</span>
                    </li>
                    <li
                        class="list-group-item bg-transparent border-secondary d-flex justify-content-between align-items-center">
                        <div><i class="bi bi-circle-fill text-secondary small me-2"></i> Solana API</div>
                        <span class="badge bg-secondary bg-opacity-25 text-muted">Not Configured</span>
                    </li>
                    <li
                        class="list-group-item bg-transparent border-secondary d-flex justify-content-between align-items-center">
                        <div><i class="bi bi-circle-fill text-warning small me-2"></i> TronGrid</div>
                        <span class="badge bg-success bg-opacity-25 text-success">Connected</span>
                    </li>
                    <li
                        class="list-group-item bg-transparent border-secondary d-flex justify-content-between align-items-center">
                        <div><i class="bi bi-circle-fill text-success small me-2"></i> Breadcrumbs</div>
                        <span class="badge bg-success bg-opacity-25 text-success">Connected</span>
                    </li>
                </ul>
                <div class="mt-3 text-center">
                    <a href="/settings" class="btn btn-sm btn-outline-secondary w-100">Manage API Keys</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}